# ä¸€é”®å¯åŠ¨è„šæœ¬ä½¿ç”¨è¯´æ˜

æœ¬é¡¹ç›®æä¾›äº†ä¸¤ä¸ªä¸€é”®å¯åŠ¨è„šæœ¬ï¼Œåˆ†åˆ«ç”¨äºå¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å¼€å‘ç¯å¢ƒå¯åŠ¨
```bash
# ä¸€é”®å¯åŠ¨å¼€å‘ç¯å¢ƒï¼ˆåŒ…å«RailsæœåŠ¡å™¨ + Solid Queueï¼‰
bin/start_dev
```

### ç”Ÿäº§ç¯å¢ƒå¯åŠ¨
```bash
# ä¸€é”®å¯åŠ¨ç”Ÿäº§ç¯å¢ƒï¼ˆåŒ…å«RailsæœåŠ¡å™¨ + é›†æˆSolid Queueï¼‰
bin/start_prod
```

## ğŸ“‹ åŠŸèƒ½ç‰¹æ€§

### å¼€å‘ç¯å¢ƒè„šæœ¬ (bin/start_dev)
- âœ… è‡ªåŠ¨æ£€æŸ¥å¹¶æ¸…ç†ç«¯å£å ç”¨
- âœ… æ•°æ®åº“åˆ›å»ºå’Œè¿ç§»ï¼ˆä¸»æ•°æ®åº“ + é˜Ÿåˆ—æ•°æ®åº“ + ç¼“å­˜æ•°æ®åº“ + Cableæ•°æ®åº“ï¼‰
- âœ… è‡ªåŠ¨å¯åŠ¨ Solid Queue æœåŠ¡
- âœ… å¯åŠ¨ Rails å¼€å‘æœåŠ¡å™¨
- âœ… ä¼˜é›…çš„è¿›ç¨‹ç®¡ç†å’Œåœæ­¢

### ç”Ÿäº§ç¯å¢ƒè„šæœ¬ (bin/start_prod)
- âœ… ç”Ÿäº§ç¯å¢ƒé…ç½®æ£€æŸ¥
- âœ… æ•°æ®åº“åˆ›å»ºå’Œè¿ç§»
- âœ… èµ„äº§é¢„ç¼–è¯‘
- âœ… Solid Queue é›†æˆåœ¨ Puma è¿›ç¨‹ä¸­è¿è¡Œ
- âœ… Rails ç”Ÿäº§æœåŠ¡å™¨å¯åŠ¨
- âœ… å®Œæ•´çš„ç¯å¢ƒéªŒè¯

## ğŸ”§ è„šæœ¬è¯¦æƒ…

### bin/start_dev
å¼€å‘ç¯å¢ƒå¯åŠ¨æµç¨‹ï¼š
1. æ£€æŸ¥å¹¶æ¸…ç†ç«¯å£3000å’Œ45678çš„å ç”¨
2. æ£€æŸ¥å¹¶åˆ›å»ºå¼€å‘æ•°æ®åº“
3. è¿è¡Œæ‰€æœ‰æ•°æ®åº“è¿ç§»ï¼ˆä¸»åº“ã€é˜Ÿåˆ—ã€ç¼“å­˜ã€Cableï¼‰
4. å¯åŠ¨ Solid Queue æœåŠ¡
5. å¯åŠ¨ Rails å¼€å‘æœåŠ¡å™¨

### bin/start_prod
ç”Ÿäº§ç¯å¢ƒå¯åŠ¨æµç¨‹ï¼š
1. æ£€æŸ¥ç”Ÿäº§ç¯å¢ƒé…ç½®ï¼ˆmaster.keyç­‰ï¼‰
2. æ£€æŸ¥å¹¶åˆ›å»ºç”Ÿäº§æ•°æ®åº“
3. è¿è¡Œæ‰€æœ‰æ•°æ®åº“è¿ç§»
4. é¢„ç¼–è¯‘ç”Ÿäº§èµ„äº§
5. è®¾ç½® SOLID_QUEUE_IN_PUMA=true
6. å¯åŠ¨ Rails ç”Ÿäº§æœåŠ¡å™¨ï¼ˆåŒ…å«Solid Queueï¼‰

## ğŸ“ æ•°æ®åº“æ–‡ä»¶

è„šæœ¬ä¼šè‡ªåŠ¨ç®¡ç†ä»¥ä¸‹SQLiteæ•°æ®åº“æ–‡ä»¶ï¼š

**å¼€å‘ç¯å¢ƒï¼š**
- `storage/development.sqlite3` - ä¸»æ•°æ®åº“
- `storage/development_queue.sqlite3` - é˜Ÿåˆ—æ•°æ®åº“
- `storage/development_cache.sqlite3` - ç¼“å­˜æ•°æ®åº“
- `storage/development_cable.sqlite3` - Cableæ•°æ®åº“

**ç”Ÿäº§ç¯å¢ƒï¼š**
- `storage/production.sqlite3` - ä¸»æ•°æ®åº“
- `storage/production_queue.sqlite3` - é˜Ÿåˆ—æ•°æ®åº“
- `storage/production_cache.sqlite3` - ç¼“å­˜æ•°æ®åº“
- `storage/production_cable.sqlite3` - Cableæ•°æ®åº“

## ğŸ” ç¯å¢ƒå˜é‡

**ç”Ÿäº§ç¯å¢ƒé‡è¦å˜é‡ï¼š**
- `RAILS_ENV=production` - è®¾ç½®ä¸ºç”Ÿäº§ç¯å¢ƒ
- `RAILS_MASTER_KEY` - Railsä¸»å¯†é’¥ï¼ˆæˆ–config/master.keyæ–‡ä»¶ï¼‰
- `SOLID_QUEUE_IN_PUMA=true` - åœ¨Pumaä¸­è¿è¡ŒSolid Queue

## ğŸ› ï¸ æ•…éšœæ’é™¤

### ç«¯å£è¢«å ç”¨
è„šæœ¬ä¼šè‡ªåŠ¨æ£€æŸ¥å¹¶æ¸…ç†ç«¯å£å ç”¨ï¼Œå¦‚æœéœ€è¦æ‰‹åŠ¨å¤„ç†ï¼š
```bash
# æŸ¥çœ‹å ç”¨3000ç«¯å£çš„è¿›ç¨‹
lsof -i:3000

# ç»ˆæ­¢å ç”¨è¿›ç¨‹
kill -9 <PID>
```

### æ•°æ®åº“é—®é¢˜
```bash
# æ‰‹åŠ¨åˆ›å»ºæ•°æ®åº“
bin/rails db:create

# æ‰‹åŠ¨è¿è¡Œè¿ç§»
bin/rails db:migrate
bin/rails db:migrate:queue
bin/rails db:migrate:cache
bin/rails db:migrate:cable
```

### èµ„äº§ç¼–è¯‘é—®é¢˜ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰
```bash
# æ¸…ç†å¹¶é‡æ–°ç¼–è¯‘èµ„äº§
bin/rails assets:clobber
bin/rails assets:precompile
```

## ğŸ“š ç›¸å…³å‘½ä»¤

```bash
# æŸ¥çœ‹æ—¥å¿—
tail -f log/development.log  # å¼€å‘ç¯å¢ƒ
tail -f log/production.log   # ç”Ÿäº§ç¯å¢ƒ

# è¿›å…¥Railsæ§åˆ¶å°
bin/rails console

# æ£€æŸ¥é˜Ÿåˆ—çŠ¶æ€
bin/rails solid_queue:status

# æ‰‹åŠ¨å¯åŠ¨é˜Ÿåˆ—æœåŠ¡ï¼ˆå¦‚æœéœ€è¦ï¼‰
bin/jobs
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **å¼€å‘ç¯å¢ƒ**ï¼šSolid Queueä½œä¸ºç‹¬ç«‹è¿›ç¨‹è¿è¡Œï¼Œä¾¿äºè°ƒè¯•
2. **ç”Ÿäº§ç¯å¢ƒ**ï¼šSolid Queueé›†æˆåœ¨Pumaä¸­ï¼Œæé«˜æ€§èƒ½
3. **é¦–æ¬¡è¿è¡Œ**ï¼šè„šæœ¬ä¼šè‡ªåŠ¨åˆ›å»ºæ‰€éœ€çš„æ•°æ®åº“æ–‡ä»¶
4. **ç«¯å£å†²çª**ï¼šè„šæœ¬ä¼šè‡ªåŠ¨å¤„ç†ï¼Œä½†å¯èƒ½éœ€è¦å‡ ç§’é’Ÿæ—¶é—´
5. **èµ„äº§ç¼–è¯‘**ï¼šç”Ÿäº§ç¯å¢ƒæ¯æ¬¡å¯åŠ¨éƒ½ä¼šé‡æ–°ç¼–è¯‘èµ„äº§ï¼Œç¡®ä¿æœ€æ–°

## ğŸ¯ æœ€ä½³å®è·µ

- **å¼€å‘ç¯å¢ƒ**ï¼šä½¿ç”¨ `bin/start_dev` å¿«é€Ÿå¯åŠ¨å®Œæ•´å¼€å‘ç¯å¢ƒ
- **ç”Ÿäº§ç¯å¢ƒ**ï¼šä½¿ç”¨ `bin/start_prod` ç¡®ä¿æ‰€æœ‰ç”Ÿäº§è¦æ±‚éƒ½æ»¡è¶³
- **æ—¥å¿—ç›‘æ§**ï¼šå®šæœŸæ£€æŸ¥æ—¥å¿—æ–‡ä»¶äº†è§£æœåŠ¡çŠ¶æ€
- **æ•°æ®åº“å¤‡ä»½**ï¼šå®šæœŸå¤‡ä»½ `storage/` ç›®å½•ä¸‹çš„SQLiteæ–‡ä»¶